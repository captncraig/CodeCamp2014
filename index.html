<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=1024" />
  <title>Thrift!</title>

  <link rel="stylesheet" href="css/style.css">

  <link href='css/font.css' rel='stylesheet' type='text/css'>
<script type='text/javascript' src='js/jquery.js'></script>
</head>
<body>

  <div id="impress">
	<div class='step' data-z='-50000' style='width:90%; left: -600px;' ><img src='SponsorSlide.png'/></div>
   
    <div id="introduction" class="step" data-x="0" data-y="0">
      <h1 class="line">High Performance Web Services with Apache Thrift</h1>
      <h2>Craig Peterson<h2>
      <h2>Utah Code Camp, Spring 2014<h2>
    </div>
	
	<div id="in2" class='step' data-y="300" data-rotate-y="45">
		<h1>What I work on</h1>
		<p>Back End Web Services<p>
		<p class='substep'>Millions of requests per hour</p>
		<p class='substep'>SOAP and REST</p>
	</div>
	<div id="in3" class='step' data-y="600" data-rotate-y="90">
		<h1>What I Value</h1>
		<p class='substep'>Performance<p>
		<p class='substep'>Stability</p>
		<p class='substep'>Ease of Development</p>
		<p class='substep'>Ease for clients</p>
	</div>
	<div id='why' data-y="900" class='step' style='text-align:center'>
		<p>Why are we using WCF instead of Web API?</p>
	</div>
	<div id='why2' class='step' data-y="900" data-z='-300' style='text-align:center'>
		<p>What about Nancy?</p>
		<p class='substep'>ServiceStack?</p>
		<p class='substep'>FuBu?</p>
	</div>
	<div id='why3' class='step' data-y="900" data-z='-600' style='text-align:center'>
		<p>Why are we using IIS?</p>
	</div>
	<div id='why4' class='step' data-y="900" data-z='-900' style='text-align:center'>
		<p style='font-size:400%'>Why are we using REST?</p>
		<p style='font-size:400%' class='substep'>Why are we using HTTP?</p>
		<p class='substep' >What alternatives are there?</p>
	</div>
	
	<div class='step' id='thrift' style='text-align:center;' data-rotate-y="540" ><p style='font-size:1000%'>Thrift</p></div>
	<div class='step' id='what-is' data-x='900' data-rotate-y="360">
		<h1>What is it?</h1>
		<p class='substep'>Framework for Remote Procedure Calls (RPC)</p>
		<p class='substep' style='position:relative; left:580px;top:-15px;'>^ Bad Word?</p>
		<p class='substep'>Way to seamlessly call a method on another machine</p>
	</div>
	<div class='step' id='philosophy' data-x='1800' data-rotate-y="180">
		<h1>Philosophy</h1>
		<p class='substep'>Simple</p>
		<p class='substep'>Efficient</p>
		<p class='substep'>Language agnostic</p>
	</div>
	
	<div id='cloud' class='step' data-x="2000" data-z='-2000' style='height:800px;width:900px;'>
		<div style='font-size:100%'>actionscript</div>
		<div style='font-size:150%'>c</div>
		<div style='font-size:250%'>c#</div>
		<div style='font-size:150%'>c++</div>
		<div style='font-size:100%'>D</div>
		<div style='font-size:100%'>delphi</div>
		<div style='font-size:100%'>Erlang</div>
		<div style='font-size:150%'>go</div>
		<div style='font-size:100%'>haskell</div>
		<div style='font-size:200%;font-weight:bold;'>java</div>
		<div style='font-size:200%;font-weight:bold;'>javascript</div>
		<div style='font-size:150%'>node.js</div>
		<div style='font-size:100%'>ocaml</div>
		<div style='font-size:150%'>perl</div>
		<div style='font-size:180%'>php</div>
		<div style='font-size:150%;font-weight:bold;'>ruby</div>
		<div style='font-size:100%'>smalltalk</div>
		<div style='font-size:150%;font-weight:bold;'>python</div>
		<div style='font-size:150%'>Cocoa</div>
		<div style='font-size:150%'>scala</div>
	</div>
	
	<!--
	<div id='notatoy' class='step'>
		<p>NOT a toy.</p>
		<p>Created at Facebook</p>
		<p>In production use at twitter, among others</p>
	</div> -->
	
	<div class='step big nofade center' id='idl'>
		<p>Interface Description <span class='substep'>(IDL)</span></p>
	</div>
	<div class='step center big nofade' data-y="200">
		<p>Language Agnostic Definition of your service.</p>
	</div>
	<div class='step center big nofade' data-y="550">
		<p>Defines Data Types:</p>
		<div class='substep'><pre  style="text-align:left;font-size:200%;position:relative;left:40%;">
struct User{
   1: i64 Id,
   2: string Username,
   4: byte Foo,
   5: double Balance,
   6: binary Img,
   8: i32 Age,
   9: bool IsPremium,
   10: list&lt;i64&gt; Friends,
   11: map&lt;string,string&gt; MiscProperties,
}</pre></div>
	</div>
	<div class='step center big nofade' data-y="900">
		<p>And Operations:</p>
		<div class='substep'><pre  style="text-align:left;font-size:200%;position:relative;left:40%;">
service UserService{
   i32 CreateUser(1: User u)
   User GetUSerDetails(1: i64 id)
   void DeleteUser(4: i64 id)
}</pre></div>
	</div>
	<div class='step center big nofade' data-y="1150">
		<p>Even exceptions:</p>
		<div class='substep'><pre  style="text-align:left;font-size:200%;position:relative;left:10%;">
exception InvalidDataException{
	1: string Reason
}		
service FooService{
   i32 DoSomething(1: string x) throws(1: InvalidDataException i)
}</pre></div>
	</div>
	<div class='step center big nofade' data-y="1340">
		<p>Client and server code generated in any language.</p>
	</div>
	
	<div class='step center big' data-x='-5000'><p>Decoupled components</p></div>
	
	<div id="components" class="step components" data-x="-10000" data-rotate-y='90' data-z="0">
      <h1 class="line">Thrift Components</h1>
	  <div class="idl box">Interface Description (IDL)</div>
	  <div class="gen box substep">Generated Objects</div>
	  <div class="genEx substep">Types, Interfaces,<br/>Clients, Serializers</div>
	  <div class="lib substep">
		<div></div>
		<span>library</span>
	  </div>
	  <div class='prot box substep'>Protocol</div>
	  <div class='substep protEx'>How do I serialize a message? <div class='substep'>Json,Binary,Compact?</div></div>
	  <div class='trans box substep'>Transport</div>
	  <div class='substep transEx'>How do I get a message from point A to point B? <div class='substep'>Socket, Http, Message Bus, Email?</div></div>
	  <div class="server substep">
		<div></div>
		<span>server</span>
	  </div>
	  <div class='hand box substep'>Handler</div>
	  <div class='substep handEx'>Implementation of generated interface<div class='substep'>Your business logic goes here.</div></div>
	  <div class='serv box substep'>Server</div>
    </div>
	
	<div id="protocol" class="step" data-x="-10000" data-rotate-y='90' data-z="-1000" >
		<h1>Protocol</h1>
		<p>How do I turn a message into a sequence of bytes?</p>
		<p class='substep' style="width:2000px;"><code>CreateUser(new User{Name="Joe",Password="ilovedolphins"});</code></p>
		<p class='substep' style="width:2000px;"><code>POST /users HTTP/1.1\r\n\r\n{"Name":"Joe","Password":"ilovedolphins"}}</code></p>
		<p class='substep' style="width:2000px;"><code>€ŠØŠØØØÿCreateUserØØØØƒØŠ÷ØŠØØØæJoe÷Ø§ØØØçilovedolphinsØØ</code></p>
		<p class='substep' style="width:2000px;"><code>‚!ØÿCreateUser£¢æJoe¢çilovedolphinsØØ</code></p>
		<p class='substep' style="width:2000px;"><code>[1,"CreateUser",1,0,{"1":{"rec":{"1":{"str":"Joe"},"2":{"str":"ilovedolphins"}}}}]</code></p>
	</div>
	
	<div id="componentsback" class="step components" data-x="-10000" data-rotate-y='90' data-z="0">
    </div>
	
	<div id="transport" class="step" data-x="-10000" data-rotate-y='90' data-z="-1300" >
		<h1>Transport</h1>
		<p>How do I get bytes from A to B?</p>
		<p><span class='substep'>TCP</span><span class='substep'>, HTTP</span><span class='substep'>, Message Bus, Email, Flat files</span></p>
		<p class='substep'>Easy to make new implementation</p>
		<p class='substep'><i>Any</i> transport can use <i>any</i> protocol.</p>
	</div>
	
	<div id='lunch' class='step'>
		<h1>Demo</h1>
		<p>What are we going to build?</p>
		<p class='substep'>Answer to the ultimate question:</p>
		<p class='substep'>"Where are we going for Lunch?"</p>
	</div>
	<div id='lunchBlocks' class='step' data-rotate-x="-90">
		<div class='box server'>Server<br/>(C#)</div>
		<div class='box web'>Voting Page<br/>(html/js)</div>
		<div class='box decider'>Decision Making App<br/> (go!)</div>
		<p class='substep'><a href='http://github.com/captncraig/CodeCamp2014'>Source code</a></p>
	</div>
	<div id='argue' class='step' data-y="-1000" data-rotate-x="-90" data-rotate-z="90">
		<p>But I could have done that easier using REST!</p>
	</div>
	<div id='argue2' class='step' data-y="-1000" data-rotate-x="-90" data-rotate-z="105">
		<p>Maybe</p>
	</div>
	<div id='argue3' class='step' data-rotate-z="30">
		<p>Why Rest is better than thrift:</p>
	</div>
	<div id='argue4' class='step' data-rotate-x="-90">
		<p><b>Simpler tools.</b></p>
		<p class='substep'>I can put a url in my browser and see something instantly.</p>
		<p class='substep'>Every language has an http library.</p>
	</div>
	<div id='argue5' class='step' data-rotate-x="-180" data-rotate-z="-15">
		<p><b>HTTP is nice</b></p>
		<p class='substep'>Custom Headers</p>
		<p class='substep'>Caching Proxies</p>
		<p class='substep'>Fiddler</p>
	</div>
	<div id='argue6' class='step' data-rotate-x="-270" data-rotate-z="-30">
		<p><b>We already know how to do it</b></p>
		<p class='substep' style='font-size:110%'>^bad argument to stick with something</p>
	</div>
	
	<div id='counter' class='step' data-x="1000">
		<p>Why Thrift is better than REST:</p>
	</div>
	<div id='counter2' class='step' data-x="866" data-z="-500" data-rotate-y="30">
		<p><b>Performance</b></p>
		<p class='substep'>Lower network utilization</p>
		<p class='substep'>Faster serialization = lower CPU</p>
		<p class='substep'>No heavy Web Server needed</p>
	</div>
	<div id='counter3' class='step' data-x="500" data-z="-866" data-rotate-y="60">
		<p><b>Interoperability</b></p>
		<p class='substep'>Generate a client in any language you want</p>
		<p class='substep'>Stronger guarantees of uniformity</p>
	</div>
	<div id='counter4' class='step' data-x="0" data-z="-1000" data-rotate-y="90">
		<p><b>Simplicity</b></p>
		<p class='substep'>Very few features</p>
		<p class='substep'>Decoupled components</p>
		<p class='substep'>Easy to extend</p>
	</div>
	<div id='counter5' class='step' data-x="-500" data-z="-866" data-rotate-y="120">
		<p><b>Community</b></p>
		<p class='substep'>Helpful</p>
		<p class='substep'>Accept patches</p>
	</div>
	<div id='counter6' class='step' data-x="-866" data-z="-500" data-rotate-y="150">
		<p><b>Philosophy</b></p>
		<p class='substep'>My company thinks in RPC terms</p>
		<p class='substep'>My company wants published client packages</p>
	</div>
	<div id='counter7' class='step' data-x="-1000" data-z="0" data-rotate-y="180">
		<p>Use what makes sense for you.</p>
	</div>
	
	<div class='step' id='outro' style="width:1000px" data-z="5000" data-x="-1000" data-rotate-y="180">
		<h1>Thanks for listening!</h1>
		<p>Thrift home page:<a href='http://thrift.apache.org'>thrift.apache.org</a></p>
		<p>This presentation:<a href='http://captncraig.github.com/CodeCamp2014'>captncraig.github.com/CodeCamp2014</a></p>
		<p>@captncraig</a></p>
	</div>
	
	
  </div> 
  <script src="js/impress.js"></script>
  <script src="js/seedrandom.js"></script>
  <script>
	impress().init();
	$(document).on('impress:stepenter', function(e) {
                    var currentSlide = $(e.target).attr('id');
 
                    if (currentSlide === 'lunch') {
                        $("#components").hide();
                    }
					
					if(!$(e.target).hasClass('nofade')){
						console.log("nonofade");
						$(".nofade.past").removeClass('nofade');
					}
					
                });
	$(document).on('impress:substep-enter', function(e) {
                    var currentSlide = $(e.target).attr('id');
 
                    
                });
	$(function(){
		Math.seedrandom(42);
		$("#cloud div").each(function(a,b){
			var el = $(b);
			var angle = a*(2*Math.PI / 20);
			console.log(angle);
			var magnitude = Math.floor((Math.random()*300)+90);
			var x = 400 + Math.cos(angle) * magnitude;
			var y = Math.sin(angle) * magnitude + 300
			el.css('left',''+x+'px');
			el.css('top',''+y+'px');
		});
	});
  </script>

</body>
</html>